/**
    * @license
    * Copyright 2019 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@tensorflow/tfjs-converter"),require("@tensorflow/tfjs-core")):"function"==typeof define&&define.amd?define(["exports","@tensorflow/tfjs-converter","@tensorflow/tfjs-core"],t):t(e.mobilenet={},e.tf,e.tf)}(this,function(e,t,n){"use strict";function o(e,t,n,o){return new(n||(n=Promise))(function(i,r){function l(e){try{s(o.next(e))}catch(e){r(e)}}function a(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})}function i(e,t){var n,o,i,r,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,o=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(!(i=(i=l.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){l=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){l.label=r[1];break}if(6===r[0]&&l.label<i[1]){l.label=i[1],i=r;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(r);break}i[2]&&l.ops.pop(),l.trys.pop();continue}r=t.call(e,l)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}var r={"1.00":"module_apply_default/MobilenetV1/Logits/global_pool","2.00":"module_apply_default/MobilenetV2/Logits/AvgPool"},l={"1.00":{.25:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_025_224/classification/1",inputRange:[0,1]},"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_050_224/classification/1",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_075_224/classification/1",inputRange:[0,1]},"1.00":{url:"data",inputRange:[0,1]}},"2.00":{"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_050_224/classification/2",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_075_224/classification/2",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_100_224/classification/2",inputRange:[0,1]}}};var a=function(){function e(e,t,n,o,i){void 0===o&&(o=-1),void 0===i&&(i=1),this.version=e,this.alpha=t,this.modelUrl=n,this.inputMin=o,this.inputMax=i,this.normalizationConstant=(i-o)/255}return e.prototype.load=function(){return o(this,void 0,void 0,function(){var e,o,r,a,s=this;return i(this,function(i){switch(i.label){case 0:return this.modelUrl?(e=this,[4,t.loadGraphModel(this.modelUrl)]):[3,2];case 1:return e.model=i.sent(),[3,4];case 2:return o=l[this.version][this.alpha].url,r=this,[4,t.loadGraphModel(o,{fromTFHub:!0})];case 3:r.model=i.sent(),i.label=4;case 4:return[4,(a=n.tidy(function(){return s.model.predict(n.zeros([1,224,224,3]))})).data()];case 5:return i.sent(),a.dispose(),[2]}})})},e.prototype.infer=function(e,t){var o=this;return void 0===t&&(t=!1),n.tidy(function(){e instanceof n.Tensor||(e=n.browser.fromPixels(e));var i=e.toFloat().mul(o.normalizationConstant).add(o.inputMin),l=i;if(224!==e.shape[0]||224!==e.shape[1]){l=n.image.resizeBilinear(i,[224,224],!0)}var a,s=l.reshape([-1,224,224,3]);if(t){var u=r[o.version];a=o.model.execute(s,u).squeeze([1,2])}else{a=o.model.predict(s).slice([0,1],[-1,1e3])}return a})},e}();e.load=function(e){return void 0===e&&(e={version:1,alpha:1}),o(this,void 0,void 0,function(){var t,o,r,s,u,c,f;return i(this,function(i){switch(i.label){case 0:if(null==n)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(r=e.version.toFixed(2),s=e.alpha?e.alpha.toFixed(2):"",u=-1,c=1,null==e.modelUrl){if(!(r in l))throw new Error("Invalid version of MobileNet. Valid versions are: "+Object.keys(l));if(!(s in l[r]))throw new Error("MobileNet constructed with invalid alpha "+e.alpha+". Valid multipliers for this version are: "+Object.keys(l[r])+".");t=l[r][s].inputRange,u=t[0],c=t[1]}return null!=e.inputRange&&(o=e.inputRange,u=o[0],c=o[1]),console.log(e.modelUrl),[4,(f=new a(r,s,e.modelUrl,u,c)).load()];case 1:return i.sent(),[2,f]}})})},Object.defineProperty(e,"__esModule",{value:!0})});
